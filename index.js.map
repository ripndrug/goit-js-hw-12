{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function createMarkup(arr) {\n    return arr.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <li class='form-item'>\n            <a href='${largeImageURL}'><img src='${webformatURL}' alt='${tags}' width='360' class='form-image'>\n                <div class='stats-container'>\n                    <div class='stats-info'>\n                        <h2 class='stats-title'>Likes</h2>\n                        <p class='stats-text'>${likes}</p>\n                    </div>\n                    <div class='stats-info'>\n                        <h2 class='stats-title'>Views</h2>\n                        <p class='stats-text'>${views}</p>\n                    </div>\n                    <div class='stats-info'>\n                        <h2 class='stats-title'>Comments</h2>\n                        <p class='stats-text'>${comments}</p>\n                    </div>\n                    <div class='stats-info'>\n                        <h2 class='stats-title'>Downloads</h2>\n                        <p class='stats-text'>${downloads}</p>\n                    </div>\n                </div>\n            </a>\n        </li>\n        `).join('');\n}","import axios from 'axios';\n\nexport const API_KEY = '47674643-19b0472e1fe1a72aec21686ba';\nexport async function fetchData(url, query, page, per_page) {\n    const { data } = await axios.get(url, {\n        params: {\n            q: query,\n            key: API_KEY,\n            per_page,\n            page,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n        },\n    });\n    return data;\n}","\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { createMarkup } from \"./js/render-functions\";\nimport { fetchData } from \"./js/pixabay-api\";\n\nconst form = document.querySelector('form');\nconst container = document.querySelector('.container');\nconst loadMore = document.querySelector('.load-more');\n\nconst BASE_URL = 'https://pixabay.com/api/';\n\nlet page = 1;\nlet per_page = 15;\nlet currentQuery = '';\n\nconst lightbox = new SimpleLightbox('.container a');\n\nform.addEventListener('submit', handleSubmit);\nloadMore.addEventListener('click', handleLoadMore);\n\nfunction handleSubmit(e) {\n    e.preventDefault();\n\n    const input = e.target.elements.input;\n\n    if (input.value.trim() === '') {\n        iziToast.warning({\n            message: 'Please enter a valid search term.',\n        });\n        return;\n    }\n\n    currentQuery = input.value.trim();\n    container.innerHTML = '';\n    page = 1;\n    loadMore.classList.add('btn-hidden');\n    \n    fetchImages();\n    e.target.reset();\n}\n\nfunction handleLoadMore() {\n    page += 1;\n    fetchImages();\n}\n\nasync function fetchImages() {\n    const loader = document.createElement('span');\n    loader.classList.add('loader');\n    loadMore.insertAdjacentElement('afterend', loader);\n\n    try {\n        const data = await fetchData(BASE_URL, currentQuery, page, per_page);\n\n        if (page === 1 && data.totalHits === 0) {\n            iziToast.error({\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n            return;\n        }\n\n        container.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n        lightbox.refresh();\n\n        if (container.childElementCount >= data.totalHits) {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });\n            loadMore.classList.add('btn-hidden');\n        } else {\n            loadMore.classList.remove('btn-hidden');\n        }\n\n        smoothScroll();\n    } catch (error) {\n        console.error(error.message)\n        // iziToast.error({\n        //     message: 'An error occurred while fetching images. Please try again later.',\n        // });\n    } finally {\n        loader.remove();\n    }\n}\n\nfunction smoothScroll() {\n    const { height: cardHeight } = container.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}"],"names":["createMarkup","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","API_KEY","fetchData","url","query","page","per_page","data","axios","form","container","loadMore","BASE_URL","currentQuery","lightbox","SimpleLightbox","handleSubmit","handleLoadMore","e","input","iziToast","fetchImages","loader","smoothScroll","error","cardHeight"],"mappings":"owBAAO,SAASA,EAAaC,EAAK,CAC9B,OAAOA,EAAI,IAAI,CAAC,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAAK;AAAA;AAAA,uBAE1EL,CAAa,eAAeD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,gDAI7BC,CAAK;AAAA;AAAA;AAAA;AAAA,gDAILC,CAAK;AAAA;AAAA;AAAA;AAAA,gDAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,gDAIRC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,SAKhD,EAAE,KAAK,EAAE,CAClB,CCvBO,MAAMC,EAAU,qCAChB,eAAeC,EAAUC,EAAKC,EAAOC,EAAMC,EAAU,CACxD,KAAM,CAAE,KAAAC,CAAM,EAAG,MAAMC,EAAM,IAAIL,EAAK,CAClC,OAAQ,CACJ,EAAGC,EACH,IAAKH,EACL,SAAAK,EACA,KAAAD,EACA,WAAY,QACZ,YAAa,aACb,WAAY,EACf,CACT,CAAK,EACD,OAAOE,CACX,CCRA,MAAME,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAY,SAAS,cAAc,YAAY,EAC/CC,EAAW,SAAS,cAAc,YAAY,EAE9CC,EAAW,2BAEjB,IAAIP,EAAO,EACPC,EAAW,GACXO,EAAe,GAEnB,MAAMC,EAAW,IAAIC,EAAe,cAAc,EAElDN,EAAK,iBAAiB,SAAUO,CAAY,EAC5CL,EAAS,iBAAiB,QAASM,CAAc,EAEjD,SAASD,EAAaE,EAAG,CACrBA,EAAE,eAAc,EAEhB,MAAMC,EAAQD,EAAE,OAAO,SAAS,MAEhC,GAAIC,EAAM,MAAM,KAAI,IAAO,GAAI,CAC3BC,EAAS,QAAQ,CACb,QAAS,mCACrB,CAAS,EACD,MACH,CAEDP,EAAeM,EAAM,MAAM,OAC3BT,EAAU,UAAY,GACtBL,EAAO,EACPM,EAAS,UAAU,IAAI,YAAY,EAEnCU,IACAH,EAAE,OAAO,OACb,CAEA,SAASD,GAAiB,CACtBZ,GAAQ,EACRgB,GACJ,CAEA,eAAeA,GAAc,CACzB,MAAMC,EAAS,SAAS,cAAc,MAAM,EAC5CA,EAAO,UAAU,IAAI,QAAQ,EAC7BX,EAAS,sBAAsB,WAAYW,CAAM,EAEjD,GAAI,CACA,MAAMf,EAAO,MAAML,EAAUU,EAAUC,EAAcR,EAAMC,CAAQ,EAEnE,GAAID,IAAS,GAAKE,EAAK,YAAc,EAAG,CACpCa,EAAS,MAAM,CACX,QAAS,0EACzB,CAAa,EACD,MACH,CAEDV,EAAU,mBAAmB,YAAalB,EAAae,EAAK,IAAI,CAAC,EACjEO,EAAS,QAAO,EAEZJ,EAAU,mBAAqBH,EAAK,WACpCa,EAAS,KAAK,CACV,QAAS,4DACzB,CAAa,EACDT,EAAS,UAAU,IAAI,YAAY,GAEnCA,EAAS,UAAU,OAAO,YAAY,EAG1CY,GACH,OAAQC,EAAO,CACZ,QAAQ,MAAMA,EAAM,OAAO,CAInC,QAAc,CACNF,EAAO,OAAM,CAChB,CACL,CAEA,SAASC,GAAe,CACpB,KAAM,CAAE,OAAQE,CAAU,EAAKf,EAAU,kBAAkB,wBAC3D,OAAO,SAAS,CACZ,IAAKe,EAAa,EAClB,SAAU,QAClB,CAAK,CACL"}